*{
    box-sizing:border-box
}
 body{
    margin:0;
    font-family:system-ui,Arial,sans-serif;
    background:linear-gradient(180deg,#ff7aa2,#ff8cab 15%,#ff999f 35%,#ff7fa2 55%,#9cc9ff 100%) fixed;
}
 .header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:22px 24px;
    color:#fff
}
 .title{
    font-size:40px;
    font-weight:800;
    text-shadow:0 2px 8px rgba(0,0,0,.15)
}
 .seg{
    display:flex;
    gap:0
}
 .seg-btn{
    border:none;
    padding:10px 14px;
    background:#7c3aed;
    color:#fff;
    cursor:pointer;
    font-weight:700
}
 .seg-btn.right{
    background:#2563eb;
    border-top-right-radius:12px;
    border-bottom-right-radius:12px
}
 .seg-btn.left{
    background:#a855f7;
    border-top-left-radius:12px;
    border-bottom-left-radius:12px
}
 .container{
    max-width:860px;
    margin:16px auto;
    padding:0 16px
}
/* Cards */
 .card{
    border-radius:20px;
    padding:16px;
    margin-bottom:16px;
    color:#0f172a
}
 .card-search{
    background:linear-gradient(180deg,#fca5a5,#fef2f2);
    box-shadow:0 10px 20px rgba(0,0,0,.08)
}
 .card-city{
    background:linear-gradient(180deg,#6cc5ff,#2aa8ff);
    color:#fff;
    box-shadow:0 10px 20px rgba(0,0,0,.12)
}
 .card-forecast{
    background:linear-gradient(180deg,#34d399,#22c55e);
    box-shadow:0 10px 20px rgba(0,0,0,.12)
}
 .card-aqi{
    background:linear-gradient(180deg,#fef08a,#fde047);
    box-shadow:0 10px 20px rgba(0,0,0,.12)
}
 .card-chat{
    background:linear-gradient(180deg,#e9d5ff,#c084fc);
    box-shadow:0 10px 20px rgba(0,0,0,.12)
}
 .card-hourly{
    background:linear-gradient(180deg,#a5f3fc,#67e8f9);
    box-shadow:0 10px 20px rgba(0,0,0,.12)
}
 .card-details{
    background:linear-gradient(180deg,#fde68a,#fcd34d);
    box-shadow:0 10px 20px rgba(0,0,0,.12)
}
 h2{
    margin:6px 0 10px 0;
    color:inherit
}
 .muted{
    opacity:.85;
    color:#e0f2fe
}
 .small{
    font-size:.9rem
}
 .search{
    display:flex;
    gap:10px
}
 .search input{
    flex:1;
    background:#fff;
    border:none;
    border-radius:16px;
    padding:14px 16px;
    font-size:16px
}
 .find-btn{
    background:#ef476f;
    color:#fff;
    border:none;
    border-radius:16px;
    padding:12px 18px;
    font-weight:800;
    cursor:pointer
}
 .offline-hint{
    color:#dc2626;
    margin-top:6px;
    font-size:0.9rem;
}
 .offline-hint.error{
    color:#dc2626;
    font-weight:700;
}
/* city layout */
 .city-two-col{
    display:grid;
    grid-template-columns:1fr 1px 1fr;
    gap:12px;
    align-items:center
}
 .row{
    display:flex;
    align-items:center;
    gap:12px
}
 .wx-icon.big{
    width:56px;
    height:56px;
    cursor:pointer
}
 .temp{
    font-size:44px;
    font-weight:800
}
 .label{
    margin-top:6px;
    font-weight:700
}
 .now{
    font-size:22px;
    font-weight:800
}
 .meta{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:8px;
    margin-top:8px
}
 .divider{
    width:1px;
    height:100%;
    background:linear-gradient(#ffffff55,#ffffffaa,#ffffff55)
}
/* AQI */
 .aqi-grid{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:12px
}
 .aqi-metric{
    background:#ffffffdd;
    border-radius:16px;
    padding:10px;
    text-align:center;
    box-shadow:0 6px 14px rgba(0,0,0,.08)
}
 .aqi-label{
    font-weight:700;
    color:#7c5300
}
 .aqi-value{
    font-size:28px;
    font-weight:800
}
 .aqi-sub{
    color:#6b7280
}
/* forecast */
 .forecast-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(95px,1fr));
    gap:10px
}
 .forecast-day{
    background:#ffffffdd;
    border-radius:16px;
    padding:10px;
    text-align:center;
    box-shadow:0 6px 14px rgba(0,0,0,.08)
}
 .forecast-day .day-name{
    font-weight:800;
    color:#0f172a
}
 .forecast-day img{
    width:32px;
    height:32px;
    margin:6px auto;
    display:block;
}
 .forecast-day .temp-range{
    margin-top:4px;
    display:flex;
    justify-content:center;
    gap:8px;
}
 .forecast-day .max{
    font-weight:800;
    color:#dc2626;
}
 .forecast-day .min{
    color:#3b82f6;
}
 .precip-prob{
    font-size:0.8rem;
    color:#0284c7;
    margin-top:6px;
    font-weight:600;
}
 .fcard{
    background:#ffffffdd;
    border-radius:16px;
    padding:10px;
    text-align:center;
    box-shadow:0 6px 14px rgba(0,0,0,.08)
}
 .fcard .day{
    font-weight:800;
    color:#0f172a
}
 .fcard img{
    width:28px;
    height:28px;
    margin:4px auto
}
 .fcard .temps{
    margin-top:4px
}
 .fcard .precip{
    color:#64748b;
    font-size:.85rem
}
/* chat */
 .chat-box{
    background:#ffffffdd;
    border-radius:16px;
    padding:10px;
    display:flex;
    flex-direction:column;
    gap:8px;
    min-height:80px;
    box-shadow:0 6px 14px rgba(0,0,0,.08)
}
 .chat-form{
    display:flex;
    gap:8px;
    margin-top:8px
}
 .chat-form input{
    flex:1;
    background:#fff;
    border:none;
    border-radius:12px;
    padding:10px 14px;
    font-size:15px;
}
 .bubble{
    padding:10px 12px;
    border-radius:12px;
    max-width:75%
}
 .bubble.bot{
    background:#e0f2fe;
    align-self:flex-start
}
 .bubble.user{
    background:#fee2e2;
    align-self:flex-end
}
/* dancing */
 .wx-icon{
    transition:transform .2s
}
 .wx-icon:hover{
    animation:wiggle .8s ease-in-out infinite
}
 .dance{
    animation:dance .6s ease-in-out
}
 @keyframes wiggle{
    0%,100%{
        transform:rotate(0)
    }
    25%{
        transform:rotate(-8deg)
    }
    50%{
        transform:rotate(8deg)
    }
    75%{
        transform:rotate(-6deg)
    }
}
 @keyframes dance{
    0%{
        transform:translateY(0) scale(1)
    }
    25%{
        transform:translateY(-6px) scale(1.05) rotate(-6deg)
    }
    50%{
        transform:translateY(0) scale(1)
    }
    75%{
        transform:translateY(-6px) scale(1.05) rotate(6deg)
    }
    100%{
        transform:translateY(0) scale(1)
    }
}
 .footer{
    color:#ffe6f3;
    text-align:center;
    padding:12px 0 24px 0
}

/* Modal Popup */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
}

.modal-content {
    background-color: #fff;
    margin: 15% auto;
    padding: 24px;
    border-radius: 16px;
    width: 90%;
    max-width: 500px;
    position: relative;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    animation: slideIn 0.3s ease-out;
}

@keyframes slideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-close {
    position: absolute;
    right: 16px;
    top: 16px;
    font-size: 28px;
    font-weight: bold;
    color: #999;
    cursor: pointer;
    line-height: 1;
}

.modal-close:hover {
    color: #333;
}

#modalTitle {
    margin: 0 0 16px 0;
    font-size: 24px;
    color: #111;
}

#modalText {
    margin: 0;
    font-size: 16px;
    line-height: 1.6;
    color: #555;
}

.detail-item {
    cursor: pointer;
    transition: transform 0.2s;
}

.detail-item:hover {
    transform: scale(1.05);
}

body.dark .modal-content {
    background-color: #1f2937;
}

body.dark #modalTitle {
    color: #fff;
}

body.dark #modalText {
    color: #d1d5db;
}

body.dark .modal-close {
    color: #9ca3af;
}

body.dark .modal-close:hover {
    color: #fff;
}

/* Tips tab */
 .tips{
    position:fixed;
    right:14px;
    bottom:14px;
    background:#111827;
    color:#fff;
    padding:8px 12px;
    border-radius:999px;
    box-shadow:0 8px 24px rgba(0,0,0,.25)
}

/* Hourly Forecast */
.hourly-scroll {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    padding: 8px 0;
    scrollbar-width: thin;
}
.hourly-item {
    min-width: 70px;
    text-align: center;
    padding: 12px 8px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 12px;
}
.hourly-time {
    font-weight: 600;
    margin-bottom: 6px;
}
.hourly-icon {
    width: 32px;
    height: 32px;
    margin: 0 auto 6px;
}
.hourly-temp {
    font-size: 1.1rem;
    font-weight: 700;
}
.hourly-precip {
    font-size: 0.8rem;
    color: #0284c7;
    margin-top: 4px;
}

/* Details Grid */
.details-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 12px;
}
.detail-item {
    background: rgba(255, 255, 255, 0.4);
    padding: 16px;
    border-radius: 14px;
    text-align: center;
}
.detail-icon {
    font-size: 2rem;
    margin-bottom: 8px;
}
.detail-label {
    font-size: 0.85rem;
    color: #475569;
    margin-bottom: 6px;
    font-weight: 600;
}
.detail-value {
    font-size: 1.3rem;
    font-weight: 700;
    color: #0f172a;
} 